# ドキュメント詳細ページ レイアウト改善 - ビジュアルガイド

## レイアウト構造の変更

### デスクトップレイアウト（≥ 1024px）

```
┌────────────────────────────────────────────────────────────────────┐
│                         BEFORE (max-w-6xl)                         │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │ ← Back                                                        │  │
│  │                                                               │  │
│  │ ┌─────────────────────────────────────────────────────────┐  │  │
│  │ │ [Image] Document Title                                  │  │  │
│  │ │ 📅 Date | 🌐 Source | 👤 Author                        │  │  │
│  │ │ [Tag] [Tag] [Tag] 🤍                                    │  │  │
│  │ └─────────────────────────────────────────────────────────┘  │  │
│  │                                                               │  │
│  │ ┌────────────────────────┐ ┌─────────────────────────────┐   │  │
│  │ │ Content Preview        │ │ Summary                     │   │  │
│  │ │                        │ │                             │   │  │
│  │ │                        │ │                             │   │  │
│  │ └────────────────────────┘ └─────────────────────────────┘   │  │
│  │ ┌────────────────────────┐                                   │  │
│  │ │ Similar Documents      │                                   │  │
│  │ └────────────────────────┘                                   │  │
│  └──────────────────────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────────────┐
│                          AFTER (max-w-7xl)                             │
│  ┌────────────────────────────────────────────────────────────────┐   │
│  │ ← Back                                                          │   │
│  │                                                                 │   │
│  │ ┌───────────────────────────────────────────────────────────┐  │   │
│  │ │ [Image] Document Title                                    │  │   │
│  │ │ ────────────────────────────────────────                  │  │   │
│  │ │ 📅 Date | 🌐 Source | 👤 Author                          │  │   │
│  │ │ [Tag] [Tag] [Tag]                                    🤍   │  │   │
│  │ └───────────────────────────────────────────────────────────┘  │   │
│  │                                                                 │   │
│  │ ┌──────────────────────────────┐ ┌───────────────────────┐    │   │
│  │ │ Content Preview              │ │ Summary               │    │   │
│  │ │                              │ │                       │    │   │
│  │ │ [Toggle Full Content]        │ │ AI Generated...       │    │   │
│  │ │                              │ │                       │    │   │
│  │ │                              │ │ [View Full Content]   │    │   │
│  │ │                              │ │                       │    │   │
│  │ ├──────────────────────────────┤ └───────────────────────┘    │   │
│  │ │ Similar Documents            │                              │   │
│  │ │                              │                              │   │
│  │ └──────────────────────────────┘                              │   │
│  └────────────────────────────────────────────────────────────────┘   │
└────────────────────────────────────────────────────────────────────────┘
      1152px                                    1280px
```

### タブレットレイアウト（640px - 1024px）

```
BEFORE: 3カラムレイアウト（狭い）          AFTER: 1カラムレイアウト（広い）

┌─────────────────────────────┐         ┌─────────────────────────────┐
│ ← Back                      │         │ ← Back                      │
│                             │         │                             │
│ ┌─────────────────────────┐ │         │ ┌─────────────────────────┐ │
│ │ [Img] Title             │ │         │ │ [Image] Title           │ │
│ │ Tags                    │ │         │ │ ─────────────────       │ │
│ └─────────────────────────┘ │         │ │ Metadata                │ │
│                             │         │ │ Tags                    │ │
│ ┌───┐ ┌───────────────────┐ │         │ └─────────────────────────┘ │
│ │Con│ │ Summary           │ │         │                             │
│ │   │ │                   │ │         │ ┌─────────────────────────┐ │
│ │   │ └───────────────────┘ │         │ │ Content Preview         │ │
│ │   │                       │         │ │                         │ │
│ │   │                       │         │ │                         │ │
│ └───┘                       │         │ └─────────────────────────┘ │
│                             │         │                             │
│ ┌─────────────────────────┐ │         │ ┌─────────────────────────┐ │
│ │ Similar                 │ │         │ │ Similar Documents       │ │
│ └─────────────────────────┘ │         │ └─────────────────────────┘ │
│                             │         │                             │
│                             │         │ ┌─────────────────────────┐ │
│                             │         │ │ Summary                 │ │
│                             │         │ └─────────────────────────┘ │
└─────────────────────────────┘         └─────────────────────────────┘
    難読、スクロール多い                     読みやすい、自然な流れ
```

### モバイルレイアウト（< 640px）

```
BEFORE: padding 24px                   AFTER: padding 16px

┌───────────────────┐                 ┌─────────────────────┐
│        (24px)     │                 │      (16px)         │
│ ┌───────────────┐ │                 │ ┌─────────────────┐ │
│ │← Back         │ │                 │ │← Back           │ │
│ │               │ │                 │ │                 │ │
│ │┌─────────────┐│ │                 │ │┌───────────────┐│ │
│ ││[56] Title   ││ │                 │ ││[44] Title     ││ │
│ ││Tags         ││ │                 │ ││───────────    ││ │
│ │└─────────────┘│ │                 │ ││Metadata       ││ │
│ │               │ │                 │ ││Tags           ││ │
│ │┌─────────────┐│ │                 │ │└───────────────┘│ │
│ ││Content      ││ │                 │ │                 │ │
│ ││             ││ │                 │ │┌───────────────┐│ │
│ │└─────────────┘│ │                 │ ││Content        ││ │
│ │               │ │                 │ ││               ││ │
│ │┌─────────────┐│ │                 │ │└───────────────┘│ │
│ ││Similar      ││ │                 │ │                 │ │
│ │└─────────────┘│ │                 │ │┌───────────────┐│ │
│ │               │ │                 │ ││Similar        ││ │
│ │┌─────────────┐│ │                 │ │└───────────────┘│ │
│ ││Summary      ││ │                 │ │                 │ │
│ │└─────────────┘│ │                 │ │┌───────────────┐│ │
│ └───────────────┘ │                 │ ││Summary        ││ │
│        (24px)     │                 │ │└───────────────┘│ │
└───────────────────┘                 │ └─────────────────┘ │
  327px使用 (87%)                     │      (16px)         │
                                      └─────────────────────┘
                                        343px使用 (91%)
```

## コンポーネント詳細

### ヘッダーカード

```
BEFORE:
┌─────────────────────────────────────────┐
│ [56px] Long Document Title That May... │ ← 切れる可能性
│ Date Source Author                      │
│ [Tag] [Tag] [Tag] [Tag] [Tag] ...  🤍 │ ← 横スクロール
└─────────────────────────────────────────┘

AFTER:
┌─────────────────────────────────────────┐
│ [56px→44px] Long Document Title         │
│             That Wraps Naturally        │ ← 改行される
│ ─────────────────────────────────────   │ ← 区切り線
│ 📅 Date | 🌐 Source | 👤 Author         │
│ [Tag] [Tag]                             │
│ [Tag] [Tag]                        🤍   │ ← 折り返し
└─────────────────────────────────────────┘
```

### ボタン

```
BEFORE:
┌─────────────────┐
│ 全文を表示      │  ← 固定サイズ
└─────────────────┘

AFTER:
Desktop/Tablet:              Mobile:
┌─────────────────┐          ┌─────────────────────────┐
│ 全文を表示      │          │   全文を表示   📄       │
└─────────────────┘          └─────────────────────────┘
  適切なpadding                100%幅、中央揃え

Hover:                       Focus (Keyboard):
┌─────────────────┐          ┌─────────────────┐
│ 全文を表示 ↑    │          ┃ 全文を表示      ┃
└─────────────────┘          └─────────────────┘
  1px上昇                      2px青枠
```

### タグ

```
BEFORE:
[Tag1][Tag2][Tag3][Tag4][Tag5]... → ← 横スクロール

AFTER:
[Tag1] [Tag2] [Tag3]
[Tag4] [Tag5]               ← 折り返し、適切な間隔
```

## カラースキーム

### カードスタイル

```
BEFORE:
┌─────────────────────────────┐
│ Gradient Border Effect      │
│ with mask and border-image  │
│ ✨ 複雑なグラデーション     │
└─────────────────────────────┘
CSS: 10+ lines, mask, !important

AFTER:
┌─────────────────────────────┐
│ Clean Modern Card           │
│ Simple border & shadow      │
│ 📦 シンプルでクリーン       │
└─────────────────────────────┘
CSS: 5 lines, clear & maintainable
```

### カラーパレット

```
使用されるCSS変数:

Background:
  --dify-surface: #FFFFFF        (カード背景)
  --dify-gray-50: #FAFBFC        (補助背景)

Border:
  --dify-border-light: #E4E7EA   (通常ボーダー)
  --dify-border: #D0D4D9         (アクティブ時)

Text:
  --dify-gray-900: #0F1419       (タイトル)
  --dify-gray-700: #2D3338       (本文)
  --dify-gray-600: #4A5056       (補足)

Accent:
  --dify-primary: #1C64F2        (フォーカス)
  Emerald: #10B981               (成功、タグ)
  Purple: #8B5CF6                (要約バッジ)
```

## インタラクション状態

### ボタン状態遷移

```
Normal → Hover → Active → Focus

┌─────────────┐   ┌─────────────┐   ┌─────────────┐   ┌─────────────┐
│   Normal    │   │   Hover ↑   │   │  Active ↓   │   │ Focus ▓▓▓▓▓ │
│             │   │ bg-gray-100 │   │ translateY  │   │ 2px outline │
│ bg-gray-50  │ → │ -1px        │ → │     (0)     │   │  primary    │
│             │   │             │   │             │ → │             │
└─────────────┘   └─────────────┘   └─────────────┘   └─────────────┘
```

### カードホバー効果

```
Normal:                          Hover:
┌─────────────────────────┐     ┌─────────────────────────┐ ↑
│                         │     │                         │ 1px
│  Similar Document       │  →  │  Similar Document       │
│  ────────────           │     │  ────────────           │
│  Category • Date        │     │  Category • Date        │
│                         │     │                         │
└─────────────────────────┘     └─────────────────────────┘
shadow-sm                        shadow-md + border-color
```

## レスポンシブ変化のアニメーション

```
Desktop (1280px) → Tablet (768px) → Mobile (375px)

┌──────────┬─────┐      ┌────────────┐      ┌───────────┐
│          │     │      │            │      │           │
│ Content  │ Side│  →   │  Content   │  →   │  Content  │
│          │     │      │            │      │           │
│          │     │      ├────────────┤      ├───────────┤
│          │     │      │  Similar   │      │  Similar  │
│          │     │      ├────────────┤      ├───────────┤
├──────────┤     │      │  Summary   │      │  Summary  │
│ Similar  │     │      └────────────┘      └───────────┘
└──────────┴─────┘      
  3-column                1-column            1-column
  2:1 ratio               full-width          full-width
  padding: 1.5rem         padding: 1.25rem    padding: 1rem
```

## タッチターゲット

```
Desktop (Mouse):                Mobile (Touch):

┌────┐ ← 32px                  ┌─────────┐
│ 🤍 │   clickable             │   🤍    │ ← 44px
└────┘                          │  heart  │   touchable
                                └─────────┘

[Button]  ← 36px height         ┌────────────┐
                                │  [Button]  │ ← 44px height
                                └────────────┘
```

## まとめ

この改善により実現された主な視覚的変化：

1. ✅ **広い表示領域**: 1152px → 1280px (デスクトップ)
2. ✅ **明確な区切り**: border-bottomでセクション分離
3. ✅ **適切な折り返し**: タグ、タイトルが自然に折り返し
4. ✅ **レスポンシブ余白**: 画面サイズに応じた最適化
5. ✅ **タッチフレンドリー**: 44px最小タッチ領域
6. ✅ **キーボード対応**: 明確なフォーカス表示
7. ✅ **クリーンなデザイン**: シンプルで保守しやすいスタイル

すべての変更が、ユーザーエクスペリエンスの向上とコード品質の改善を両立しています。
